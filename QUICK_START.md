# Chatterbox å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ ä»Šæ™šè¦åšçš„ï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/gmingchen/vue3-element-plus-im.git fleets-web
cd fleets-web

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨é¡¹ç›®ï¼ˆå…ˆçœ‹çœ‹æ•ˆæœï¼‰
npm run dev
```

è®¿é—®ï¼šhttp://localhost:5173 ï¼ˆæˆ–æ§åˆ¶å°æ˜¾ç¤ºçš„åœ°å€ï¼‰

**æ³¨æ„**ï¼šç°åœ¨ä¼šæŠ¥é”™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºè¿˜æ²¡å¯¹æ¥ä½ çš„åç«¯ã€‚

## ğŸ“‹ æ˜å¤©çš„å·¥ä½œæµç¨‹ï¼ˆ5-8å°æ—¶ï¼‰

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€é…ç½®ï¼ˆ1å°æ—¶ï¼‰
1. ä¿®æ”¹ `src/utils/request.js` - æ”¹ API åœ°å€å’Œè®¤è¯æ–¹å¼
2. ä¿®æ”¹ `src/api/user.js` - æ”¹ç™»å½•æ¥å£
3. æµ‹è¯•ç™»å½•åŠŸèƒ½

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ3å°æ—¶ï¼‰
4. ä¿®æ”¹ `src/api/friend.js` - å¥½å‹æ¥å£
5. ä¿®æ”¹ `src/api/message.js` - æ¶ˆæ¯æ¥å£
6. ä¿®æ”¹ `src/api/conversation.js` - ä¼šè¯æ¥å£
7. æµ‹è¯•å‘é€æ¥æ”¶æ¶ˆæ¯

### ç¬¬ä¸‰é˜¶æ®µï¼šå®æ—¶é€šä¿¡ï¼ˆ2å°æ—¶ï¼‰
8. ä¿®æ”¹ `src/utils/websocket.js` - WebSocket è¿æ¥
9. æµ‹è¯•å®æ—¶æ¶ˆæ¯æ¨é€

### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–è°ƒè¯•ï¼ˆ1-2å°æ—¶ï¼‰
10. å¤„ç†æ•°æ®æ ¼å¼å·®å¼‚
11. ä¿®å¤ bug
12. ç•Œé¢å¾®è°ƒ

## ğŸ”‘ å…³é”®æ–‡ä»¶ä½ç½®

```
fleets-web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              â† ä¸»è¦ä¿®æ”¹è¿™é‡Œ
â”‚   â”‚   â”œâ”€â”€ user.js       â† ç”¨æˆ·/ç™»å½•æ¥å£
â”‚   â”‚   â”œâ”€â”€ friend.js     â† å¥½å‹æ¥å£
â”‚   â”‚   â”œâ”€â”€ message.js    â† æ¶ˆæ¯æ¥å£
â”‚   â”‚   â””â”€â”€ conversation.js â† ä¼šè¯æ¥å£
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ request.js    â† API åŸºç¡€é…ç½®ï¼ˆå¿…æ”¹ï¼‰
â”‚   â”‚   â””â”€â”€ websocket.js  â† WebSocket é…ç½®ï¼ˆå¿…æ”¹ï¼‰
â”‚   â”œâ”€â”€ store/            â† çŠ¶æ€ç®¡ç†ï¼ˆå¯èƒ½éœ€è¦æ”¹ï¼‰
â”‚   â””â”€â”€ views/            â† é¡µé¢ï¼ˆä¸€èˆ¬ä¸ç”¨æ”¹ï¼‰
â””â”€â”€ FLEETS_ADAPTATION_GUIDE.md â† è¯¦ç»†é€‚é…æŒ‡å—
```

## ğŸ¯ ä½ çš„åç«¯æ¥å£å¯¹ç…§è¡¨

| åŠŸèƒ½ | Chatterbox åŸæ¥å£ | ä½ çš„ Fleets æ¥å£ |
|------|------------------|-----------------|
| ç™»å½• | `/auth/login` | `/user/login` |
| æ³¨å†Œ | `/auth/register` | `/user/register` |
| ç”¨æˆ·ä¿¡æ¯ | `/user/info` | `/user/info` |
| å¥½å‹åˆ—è¡¨ | `/friend/list` | `/friendship/list` |
| æ·»åŠ å¥½å‹ | `/friend/add` | `/friendship/add` |
| å‘é€æ¶ˆæ¯ | `/message/send` | `/message/send` |
| å†å²æ¶ˆæ¯ | `/message/history` | `/message/history/{conversationId}` |
| ä¼šè¯åˆ—è¡¨ | `/conversation/list` | `/conversation/list` |
| æ¶ˆæ¯åŒæ­¥ | - | `/mailbox/sync` |
| WebSocket | `ws://åŸåœ°å€/ws` | `ws://localhost:8080/ws` |

## ğŸ”§ æœ€å…³é”®çš„ä¸‰ä¸ªä¿®æ”¹

### 1. API åŸºç¡€åœ°å€ï¼ˆsrc/utils/request.jsï¼‰
```javascript
// æ‰¾åˆ°è¿™è¡Œ
const baseURL = 'http://åŸåœ°å€'

// æ”¹æˆ
const baseURL = 'http://localhost:8080'
```

### 2. è®¤è¯æ–¹å¼ï¼ˆsrc/utils/request.jsï¼‰
```javascript
// æ‰¾åˆ°è¯·æ±‚æ‹¦æˆªå™¨ï¼Œæ”¹æˆ Sa-Token
config.headers['satoken'] = localStorage.getItem('satoken')
```

### 3. WebSocket åœ°å€ï¼ˆsrc/utils/websocket.jsï¼‰
```javascript
// æ‰¾åˆ° WebSocket è¿æ¥
this.ws = new WebSocket('ws://localhost:8080/ws?token=' + token)
```

## ğŸ› é‡åˆ°é—®é¢˜æ€ä¹ˆåŠ

1. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰**
   - Network æ ‡ç­¾ï¼šæŸ¥çœ‹ API è¯·æ±‚å’Œå“åº”
   - Console æ ‡ç­¾ï¼šæŸ¥çœ‹é”™è¯¯æ—¥å¿—

2. **æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨**
   ```bash
   # ç¡®ä¿ä½ çš„ Fleets åç«¯åœ¨è¿è¡Œ
   # è®¿é—® http://localhost:8080 åº”è¯¥æœ‰å“åº”
   ```

3. **æŸ¥çœ‹è¯¦ç»†é€‚é…æŒ‡å—**
   - æ‰“å¼€ `FLEETS_ADAPTATION_GUIDE.md`
   - é‡Œé¢æœ‰è¯¦ç»†çš„ä»£ç ç¤ºä¾‹

4. **å¯¹æ¯” Postman è¯·æ±‚**
   - æ‰“å¼€ `Fleets_User_API_Tests.postman_collection.json`
   - çœ‹çœ‹æ­£ç¡®çš„è¯·æ±‚æ ¼å¼æ˜¯ä»€ä¹ˆæ ·çš„

## ğŸ“ æ˜å¤©å¼€å§‹å‰çš„æ£€æŸ¥æ¸…å•

- [ ] Node.js å·²å®‰è£…ï¼ˆnode -v æŸ¥çœ‹ç‰ˆæœ¬ï¼‰
- [ ] é¡¹ç›®å·²å…‹éš†åˆ°æœ¬åœ°
- [ ] ä¾èµ–å·²å®‰è£…ï¼ˆnpm install å®Œæˆï¼‰
- [ ] é¡¹ç›®èƒ½å¯åŠ¨ï¼ˆnpm run dev æˆåŠŸï¼‰
- [ ] åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] å·²é˜…è¯» FLEETS_ADAPTATION_GUIDE.md

## ğŸ’¡ çœæ—¶æŠ€å·§

1. **å…ˆæ”¹ç™»å½•ï¼Œå†æ”¹å…¶ä»–**
   - ç™»å½•é€šäº†ï¼Œå…¶ä»–æ¥å£å°±å¥½æ”¹äº†

2. **ç”¨ console.log è°ƒè¯•**
   ```javascript
   console.log('è¯·æ±‚æ•°æ®:', data)
   console.log('å“åº”æ•°æ®:', response)
   ```

3. **ä¸€æ¬¡åªæ”¹ä¸€ä¸ªæ¥å£**
   - æ”¹å®Œå°±æµ‹è¯•
   - ä¸è¦ä¸€æ¬¡æ”¹å¤ªå¤š

4. **ä¿ç•™åŸä»£ç æ³¨é‡Š**
   ```javascript
   // åŸæ¥çš„ä»£ç 
   // const url = '/old/api'
   
   // æ”¹æˆä½ çš„
   const url = '/new/api'
   ```

## ğŸ‰ é¢„æœŸæ•ˆæœ

å®Œæˆåä½ åº”è¯¥èƒ½ï¼š
- âœ… ç™»å½•ç³»ç»Ÿ
- âœ… çœ‹åˆ°å¥½å‹åˆ—è¡¨
- âœ… å‘é€å’Œæ¥æ”¶æ¶ˆæ¯
- âœ… å®æ—¶æ¶ˆæ¯æ¨é€
- âœ… æŸ¥çœ‹å†å²æ¶ˆæ¯

## ğŸ“š æœ‰ç”¨çš„å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
tree /f src

# æœç´¢ç‰¹å®šä»£ç 
findstr /s /i "baseURL" src\*.*
```

ç¥ä½ æ˜å¤©å·¥ä½œé¡ºåˆ©ï¼æœ‰é—®é¢˜éšæ—¶é—®æˆ‘ ğŸš€
